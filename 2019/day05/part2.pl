#!/usr/bin/perl

use strict;
use warnings;

use Data::Dumper;

$_ = <>;
chomp;
my @s = split ',';
my $p = 0;

while ($s[$p] != 99) {
	if ($s[$p] == 1) {
		$s[$s[$p+3]] = $s[$s[$p+1]] + $s[$s[$p+2]];
		$p += 4;
	} elsif ($s[$p] == 2) {
		$s[$s[$p+3]] = $s[$s[$p+1]] * $s[$s[$p+2]];
		$p += 4;
	} elsif ($s[$p] == 3) {
		chomp($s[$s[$p+1]] = <>);
		$p += 2;
	} elsif ($s[$p] == 4) {
		print "$s[$s[$p+1]]\n";
		$p += 2;
	} elsif ($s[$p] == 5) {
		$p = $s[$s[$p+1]] ? $s[$s[$p+2]] : $p + 3;
	} elsif ($s[$p] == 6) {
		$p = $s[$s[$p+1]] ? $p + 3 : $s[$s[$p+2]];
	} elsif ($s[$p] == 7) {
		$s[$s[$p+3]] = $s[$s[$p+1]] < $s[$s[$p+2]] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 8) {
		$s[$s[$p+3]] = $s[$s[$p+1]] == $s[$s[$p+2]] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 101) {
		$s[$s[$p+3]] = $s[$p+1] + $s[$s[$p+2]];
		$p += 4;
	} elsif ($s[$p] == 102) {
		$s[$s[$p+3]] = $s[$p+1] * $s[$s[$p+2]];
		$p += 4;
	} elsif ($s[$p] == 104) {
		print "$s[$p+1]\n";
		$p += 2;
	} elsif ($s[$p] == 105) {
		$p = $s[$p+1] ? $s[$s[$p+2]] : $p + 3;
	} elsif ($s[$p] == 106) {
		$p = $s[$p+1] ? $p + 3 : $s[$s[$p+2]];
	} elsif ($s[$p] == 107) {
		$s[$s[$p+3]] = $s[$p+1] < $s[$s[$p+2]] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 108) {
		$s[$s[$p+3]] = $s[$p+1] == $s[$s[$p+2]] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 1001) {
		$s[$s[$p+3]] = $s[$s[$p+1]] + $s[$p+2];
		$p += 4;
	} elsif ($s[$p] == 1002) {
		$s[$s[$p+3]] = $s[$s[$p+1]] * $s[$p+2];
		$p += 4;
	} elsif ($s[$p] == 1005) {
		$p = $s[$s[$p+1]] ? $s[$p+2] : $p + 3;
	} elsif ($s[$p] == 1006) {
		$p = $s[$s[$p+1]] ? $p + 3 : $s[$p+2];
	} elsif ($s[$p] == 1007) {
		$s[$s[$p+3]] = $s[$s[$p+1]] < $s[$p+2] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 1008) {
		$s[$s[$p+3]] = $s[$s[$p+1]] == $s[$p+2] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 1101) {
		$s[$s[$p+3]] = $s[$p+1] + $s[$p+2];
		$p += 4;
	} elsif ($s[$p] == 1102) {
		$s[$s[$p+3]] = $s[$p+1] * $s[$p+2];
		$p += 4;
	} elsif ($s[$p] == 1105) {
		$p = $s[$p+1] ? $s[$p+2] : $p + 3;
	} elsif ($s[$p] == 1106) {
		$p = $s[$p+1] ? $p + 3 : $s[$p+2];
	} elsif ($s[$p] == 1107) {
		$s[$s[$p+3]] = $s[$p+1] < $s[$p+2] ? 1 : 0;
		$p += 4;
	} elsif ($s[$p] == 1108) {
		$s[$s[$p+3]] = $s[$p+1] == $s[$p+2] ? 1 : 0;
		$p += 4;
	} else {
		die Dumper @s, $p;
	}
}
